# Артемов Никита Владиславович

## 17 Вариант

## Задание

Разработать программу, находящую в заданной ASCII-строке первую слева направо последовательность N символов, каждый
элемент которой определяется по условию «меньше предшествующего» (N вводится как отдельный параметр).

### Решение на 4:

- Для синхронизации доступа к ячейкам матрицы используется семафор, хранящийся в разделяемой памяти. При этом для общения процессов также используется разделяемая память, где хранится матрица огорода и идентификатор семафора.

- В каждом шаге программы садовник сначала перемещается в соответствующую ячейку матрицы и проверяет, свободна ли она. Если она занята другим садовником, то он ожидает, пока тот закончит работу, а затем сам начинает работать. Если же ячейка пуста, то он занимает ее и начинает выполнять работу, после чего освобождает ячейку и продолжает перемещаться по огороду.

- Все садовники работают до тех пор, пока не будет получен сигнал SIGINT (Ctrl+C в терминале), после чего программа завершается.

### Решение на 5:

- Для реализации многопоточности используются процессы, которые работают с общей памятью. Специально для этого создается структура shared_memory, содержащая семафор sem и двумерный массив garden, который представляет собой сад. Семафор sem используется для синхронизации доступа к общей памяти.

- Каждый процесс-садовник работает в отдельном потоке и передает в функцию worker указатель на общую память.

### Решение на 6:


```
+-------------+                     +------------------+
|             |                     |                  |
|    Main     |                     |     Worker 1     |
|             |                     |                  |
+-------------+                     +------------------+
       |                                        |
       |                                        |
       |                                        |
+------+----------------------------------------+-------+
|                                                       |
|                     Shared Memory                     |
|                                                       |
+-------------------------------------------------------+
       |                                        |
       |                                        |
       |                                        |
+------+----------------------------------------+-------+
|              |                     |                  |
|   Semaphore  |                     |     Worker 2     |
|              |                     |                  |
+--------------+                     +------------------+

```

### Решение на 7:

Работа каждого рабочего организована в бесконечном цикле, который завершается при получении сигнала SIGINT. При завершении программы освобождаются ресурсы, выделенные под семафор и разделяемую память.

- Главный процесс создает несколько дочерних процессов-рабочих.
- Каждый рабочий процесс проходит по массиву в зигзагообразном порядке, помечая пройденные клетки значением WORKED и не проходя через препятствия.
- Рабочие процессы работают независимо друг от друга в бесконечном цикле.
- Главный процесс завершает программу при получении сигнала SIGINT, освобождая ресурсы, выделенные под семафор и разделяемую память.

### Решение на 8:

1. Главный поток создает разделяемую память и инициализирует ее, используя структуру shared_memory.
2. Главный поток создает семафор и инициализирует его в 1.
3. Главный поток создает два потока, каждый из которых представляет собой работника, и передает им указатель на shared_memory, индекс (0 или 1) и время, которое работник будет проводить в работе. 
4. Работники начинают движение по заданному маршруту, при этом они получают доступ к shared_memory и обновляют информацию о своем текущем положении и статусе. 
5. Потоки обмениваются информацией через shared_memory и семафор, чтобы координировать свои действия и избежать коллизий. 
6. Главный поток обрабатывает сигнал SIGINT, который генерируется при нажатии Ctrl-C, и устанавливает флаг keepRunning в 0. 
7. Работники завершают свою работу, когда они достигают своей цели и устанавливают свой статус в WORKED. 
8. После того как оба работника завершают свою работу, программа закрывает разделяемую память и семафор.