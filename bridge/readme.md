# Артемов Никита Владиславович

## 3 Вариант

## Задание

Разработать программу, находящую в заданной ASCII-строке первую слева направо последовательность N символов, каждый
элемент которой определяется по условию «меньше предшествующего» (N вводится как отдельный параметр).

### Тесты

1. n = 2 (./program 2 ../in/1.txt ./out/1.txt)
   > Ожидаемые выходные данные: *пустой файл*
2. n = 3 (./program 3 ../in/2.txt ./out/2.txt)
   > Ожидаемые выходные данные: *gfe*
3. n = 2 (./program 2 ../in/3.txt ./out/3.txt)
   > Ожидаемые выходные данные: *H7*
4. n = 4 (./program 4 ../in/4.txt ./out/4.txt)
   > Ожидаемые выходные данные: *пустой файл*
5. n = 3 (./program 3 ../in/5.txt ./out/5.txt)
   > Ожидаемые выходные данные: *L10*

### Схема решения на 4:

1. Процесс 1 (Child process 1) открывает входной файл и читает его содержимое. Затем он передает содержимое файла через
   pipe1 в процесс 2.
2. Процесс 2 (Child process 2) читает данные из pipe1 и обрабатывает их в соответствии с заданием. Он ищет первую слева
   направо последовательность N символов, где каждый элемент удовлетворяет условию "меньше предшествующего". Затем он
   передает результат обработки через pipe2 в процесс 3.
3. Процесс 3 (Parent process) читает данные из pipe2 и записывает результат в выходной файл.

- Каждый процесс закрывает неиспользуемые концы каналов для правильного завершения работы.

```
+---------+   pipe1  +---------+   pipe2  +---------+
| Process |--------->| Process |--------->| Process |
|    1    |          |    2    |          |    3    |
+----+----+          +----+----+          +----+----+
     |                    |                    |
     |                    |                    |
  Input file         Intermediate          Output file
                     processing
```

### Схема решения на 5:

1. Входной файл (input_file) открывается на чтение.
2. Создается первый именованный канал (pipe1).
3. Создается второй именованный канал (pipe2).
4. Происходит первый вызов fork() для создания процесса Child 1.
5. Child 1 читает данные из входного файла и передает их в pipe1.
6. Происходит второй вызов fork() для создания процесса Child 2.
7. Child 2 читает данные из pipe1, обрабатывает их согласно условию задачи и передает результат обработки в pipe2.
8. Родительский процесс читает данные из pipe2 и записывает их в выходной файл (output_file).
9. Все файлы и каналы закрываются, именованные каналы удаляются.

```
+----------+     +---------+     +-------------+     +-----------+     +-----------+
| Входной  |     |  Child  |     | Именованный |     | Child     |     | Выходной  |
| файл     +---->+  Proc 1 +---->+ канал 1     +---->+ Proc 2    +---->+ файл      |
| (input)  |     | (Чтение |     | (pipe1)     |     | (Обработка|     | (output)  |
|          |     | данных) |     |             |     | данных)   |     |           |
+----------+     +---------+     +-------------+     +-----------+     +-----------+
```

### Схема решения на 6:

1. Входной файл (input_file) открывается на чтение.
2. Создается неименованный канал (pipe_fd).
3. Происходит вызов fork() для создания дочернего процесса (Child Proc).
4. Дочерний процесс читает данные из входного файла, обрабатывает их согласно заданию и передает результат обработки
   через неименованный канал (pipe_fd) обратно в родительский процесс.
5. Родительский процесс читает данные из неименованного канала (pipe_fd).
6. Выходной файл (output_file) открывается на запись.
7. Родительский процесс записывает полученные данные из канала (pipe_fd) в выходной файл.
8. Закрываются файловые дескрипторы и процесс завершается.

```
+-----------+     +------------+     +---------------+     +-----------+
| Входной   |     | Child      |     | Неименованный |     | Выходной  |
| файл      +---->+ Proc       +---->+ канал         +---->+ файл      |
| (input)   |     | (Обработка |     | (pipe_fd)     |     | (output)  |
|           |     | данных)    |     |               |     |           |
+-----------+     +------------+     +---------------+     +-----------+

```

### Схема решения на 7:

1. Родительский процесс (P1) читает данные из входного файла (input_file).
2. Дочерний процесс (P2) обрабатывает данные и передает результат обработки через именованный канал (named_pipe) обратно
   в родительский процесс (P1).
3. Родительский процесс (P1) создает именованный канал (named_pipe) и передает данные из входного файла в дочерний
   процесс (P2) через именованный канал.
4. Дочерний процесс (P2) читает данные из именованного канала (named_pipe) и обрабатывает их в соответствии с заданием.
5. Родительский процесс (P1) читает результат обработки из именованного канала (named_pipe) и записывает его в выходной
   файл (output_file).

```
+----------------+        +-------------------+        +----------------+
| Входной файл   | --1--> | Родительский      | --3--> | Дочерний       |
| (input_file)   |        | процесс (P1)      |        | процесс (P2)   |
+----------------+        +-------------------+        +----------------+
                                ^                             |
                                |                             |
                                5                             4
                                |                             |
                                |                             v
                            +--------------+        +------------------+
                            | Выходной файл| <--2---| Именованный канал|
                            | (output_file)|        | (named_pipe)     |
                            +--------------+        +------------------+
```

### Схема решения на 8:

1. NP1 читает данные из входного файла (input_file) и передает их через именованный канал pipe1.
2. NP2 читает данные из именованного канала pipe1.
3. NP2 обрабатывает данные в соответствии с заданием (находит первую слева направо последовательность N символов, каждый
   элемент которой определяется по условию «меньше предшествующего») и передает результат обработки через именованный
   канал pipe2.
4. NP1 читает результат обработки из именованного канала pipe2.
5. NP1 записывает результат обработки в выходной файл (output_file).

```
+----------------+        +------------------+        +----------------+        +------------------+
| Входной файл   | --1--> | Независимый       | --3--> | Независимый   | --5--> | Выходной файл    |
| (input_file)   |        | процесс (NP1)     |        | процесс (NP2) |        | (output_file)    |
+----------------+        +------------------+        +----------------+        +------------------+
                                       ^                         |
                                       |                         v
                                   +-------+                 +-------+
                                   | Канал |                 | Канал |
                                   | pipe1 |                 | pipe2 |
                                   +-------+                 +-------+
```

### Схема решения на 9:

1. Родительский процесс считывает данные из input_file.txt и отправляет их через именованный канал pipe1 дочернему
   процессу.
2. Дочерний процесс читает данные из pipe1, обрабатывает их в соответствии с заданием, и, если находит искомую
   последовательность, отправляет ее обратно родительскому процессу через pipe2.
3. Родительский процесс читает результат из pipe2 и записывает его в output_file.txt.

```
 +----------------+     +-------------+       +----------------+
 |                |     |             |       |                |
 | input_file.txt | --> |  Parent     |  -->  | output_file.txt|
 |                |     |  Process    |       |                |
 +----------------+     +-------------+       +----------------+
                           |       ^
                           v       |
                        +-----+ +-----+
                        |pipe1| |pipe2|
                        +-----+ +-----+
                           |       ^
                           v       |
                         +------------+
                         |            |
                         | Child      |
                         | Process    |
                         |            |
                         +------------+
```

### Схема решения на 10:

1. Родительский процесс читает данные из входного файла и отправляет их дочернему процессу. 
2. Дочерний процесс обрабатывает данные, ищет последовательность символов, соответствующую условиям задачи, и отправляет результат обратно родительскому процессу.
3. Родительский процесс записывает результат в выходной файл. 
- Это взаимодействие продолжается до тех пор, пока не будет найдена нужная последовательность или пока не закончится входной файл.

```
    +---------------+      +---------------+
    |   Parent      |      |   Child       |
    |   Process     |      |   Process     |
    +---------------+      +---------------+
    |  Read file    |      |               |
    |  into buffer  |----->|  Find sequence|
    |               |      |  in buffer    |
    | Write result  |<-----|  Send result  |
    |  to file      |      |  to parent    |
    +---------------+      +---------------+
           ^                      ^
           |                      |
           v                      v
    +---------------+      +---------------+
    |  Input File   |      |  Output File  |
    +---------------+      +---------------+
```